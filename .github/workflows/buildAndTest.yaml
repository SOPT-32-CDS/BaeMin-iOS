# name: Run Test

# on:
#   pull_request:
#     branches: [ develop ]

# # workflowì˜ ì‹¤í–‰ì€ í•˜ë‚˜ ì´ìƒì˜ jobìœ¼ë¡œ êµ¬ì„± ë¨
# jobs:
#   # ì´ workflow ëŠ” "build" ë¼ëŠ” single job ìœ¼ë¡œ êµ¬ì„±
#   build:
#     # jobì´ ì‹¤í–‰ë  í™˜ê²½ - ìµœì‹  mac os
#     runs-on: macos-latest
#     steps:      
#     # uses í‚¤ì›Œë“œë¥¼ í†µí•´ Github Actionsì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì•¡ì…˜ì„ ì‚¬ìš© ê°€ëŠ¥. ì•„ë˜ ì•¡ì…˜ì€ repository ì— ì²´í¬ì•„ì›ƒí•˜ëŠ” ê²ƒ
#     - uses: actions/checkout@v3
#     # shell ì´ìš©í•´ì„œ í•˜ë‚˜ì˜ command ìˆ˜í–‰
#     - name: Start xcode build ğŸ› 
#       run: |
#         xcodebuild clean test -project BeaMin-iOS/BeaMin-iOS.xcodeproj -scheme BeaMin-iOS -destination 'platform=iOS Simulator,name=iPhone 11 Pro,OS=latest'

#     - name: Add PR Comment
#       if: ${{ success() }}
#       uses: mshick/add-pr-comment@v1
#       with:
#         message: |
#          ## Build & Test Checked âœ…
#          | âœ… 	| Auto Build And Test SUCCESS !!! 	|
#          |---	|----------------------------------------------	|
#         repo-token: ${{ secrets.ACCESS_TOKEN }}
#         repo-token-user-login: 'github-actions[bot]' # The user.login for temporary GitHub tokens
#         allow-repeats: false # This is the default

name: Test
on:
  pull_request:
    branches: [main]
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  test:
    runs-on: macos-latest
    strategy:
      matrix:
        xcode: ["15.0.1"]
    
    steps:
      - uses: actions/checkout@v4
      - uses: maxim-lobanov/setup-xcode@v1
        with:
          xcode-version: latest
      - name: Test
        run: |
          set -ex
          xcodebuild clean test -project BeaMin-iOS/BeaMin-iOS.xcodeproj -scheme BeaMin-iOS -destination 'platform=iOS Simulator,name=iPhone 11 Pro,OS=latest'
      - uses: kishikawakatsumi/xcresulttool@v1
        with:
          path: TestResults.xcresult
          token: ${{ secrets.ACCESS_TOKEN }}
        if: success() || failure()
